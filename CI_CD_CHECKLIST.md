# üìã CI/CD –ß–µ–∫-–ª–∏—Å—Ç: HiTE PRO API –¢–µ—Å—Ç—ã

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ **–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**
–¥–ª—è Playwright API-—Ç–µ—Å—Ç–æ–≤ —à–ª—é–∑–∞ HiTE PRO Gateway —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **GitHub Actions** –∏ **Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**.

---

üîπ 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

- –ü—Ä–æ–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (`npm init -y`)
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
  npm install @playwright/test dotenv --save-dev

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç:
tests/devices.spec.js
.env.example
playwright.config.js
package.json 

üîπ 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª .env —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
HITEPRO_BASE_URL=https://–≤–∞—à_–∫–ª—é—á.connect-profi.ru/rest/
HITEPRO_USER=admin
HITEPRO_PASS=–≤–∞—à_–ø–∞—Ä–æ–ª—å

- –§–∞–π–ª .env –¥–æ–±–∞–≤–ª–µ–Ω –≤ .gitignore
- –¢–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ:
npx playwright test
npx playwright show-report

üîπ3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å Git
-–°–æ–∑–¥–∞–Ω .gitignore —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
node_modules/
.env
playwright-report/
test-results/
- –°–æ–∑–¥–∞–Ω README.md —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É
- –°–æ–∑–¥–∞–Ω .env.example (–±–µ–∑ –ø–∞—Ä–æ–ª–µ–π!)
- –ü—Ä–æ–µ–∫—Ç –∑–∞–∫–æ–º–º–∏—á–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ:
git add .
git commit -m "feat: initial Playwright API tests"

üîπ4. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ GitHub
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–∑–¥–∞–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, hitepro-api-tests)
- –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–µ—Ä–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞:
git remote add origin https://github.com/cheryst24-code-qa/hitepro-api-tests.git
git branch -M main
git push -u origin main

‚ö†Ô∏è –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω git pull --rebase –ø–µ—Ä–µ–¥ –ø—É—à–µ–º.

üîπ5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ GitHub
–ü–µ—Ä–µ–π—Ç–∏: Settings ‚Üí Secrets and variables ‚Üí Actions

–î–æ–±–∞–≤–∏—Ç—å Repository secrets:
| –ù–∞–∑–≤–∞–Ω–∏–µ                | –ó–Ω–∞—á–µ–Ω–∏–µ                                   |                
|-------------------------|--------------------------------------------|
| HITEPRO_BASE_URL        | https://–≤–∞—à_–∫–ª—é—á.connect-profi.ru/rest/    |
| HITEPRO_USER            | admin                                      |
| HITEPRO_PASS            | –≤–∞—à –ø–∞—Ä–æ–ª—å                                 |
| TELEGRAM_BOT_TOKEN      | —Ç–æ–∫–µ–Ω –æ—Ç @BotFather                        |
| TELEGRAM_CHAT_ID        | –≤–∞—à chat_id                                | 

üîπ 6. –°–æ–∑–¥–∞–Ω–∏–µ workflow-—Ñ–∞–π–ª–∞
- –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª .github/workflows/api-tests.yml
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª—é—á–∞–µ—Ç:
   - –¢—Ä–∏–≥–≥–µ—Ä—ã: push –∏ schedule
   - –£—Å—Ç–∞–Ω–æ–≤–∫—É Node.js –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ó–∞–ø—É—Å–∫ npx playwright test
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ (playwright-report)
   - –û—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:
- –ù–µ—Ç –ø—Ä–æ–±–µ–ª–æ–≤ –≤ URL: "https://github.com/$GITHUB_REPO/..."
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è "${{ steps.run_tests.outcome }}", –∞ –Ω–µ "${{ job.status }}"
- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±—ë—Ä–Ω—É—Ç—ã –≤ –∫–∞–≤—ã—á–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è if: always() –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–∞–∂–µ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤

üîπ 7. –ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ api.pdf
–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
- switch: status: boolean, –∫–æ–º–∞–Ω–¥—ã 1 (–≤–∫–ª), 2 (–≤—ã–∫–ª), 3 (–∏–º–ø—É–ª—å—Å)
- dimmer: status: 0‚Äì100, –∫–æ–º–∞–Ω–¥–∞ 101 ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å
- drive: status: 0‚Äì3, –∫–æ–º–∞–Ω–¥—ã 2 (–æ—Ç–∫—Ä—ã—Ç—å), 3 (–∑–∞–∫—Ä—ã—Ç—å), 4 (–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å)
- LED3S/M: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–º —á–µ—Ä–µ–∑ ?color=HEX
- RGBW:
  - color (HEX),
  - colorTemperature –ø—Ä–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏: 1500‚Äì6500,
  - effect: 0‚Äì9
- –î–∞—Ç—á–∏–∫–∏:
  - motion ‚Üí boolean,
  - temperature ‚Üí float (-40‚Ä¶+50),
  - checker / water / power ‚Üí 0 –∏–ª–∏ 1,
  - illumination / humidity ‚Üí 0‚Äì100
- transmitter ‚Üí –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç status (–æ–∂–∏–¥–∞–µ—Ç—Å—è 404)
- –õ–æ–≥–∏: GET /logs/device/?id=..., GET /logs/scenario/?id=...
- –û—à–∏–±–∫–∏: 401 (–Ω–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å), 404 (–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π ID), 405 (PUT –Ω–∞ –¥–∞—Ç—á–∏–∫)

üîπ 8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- Workflow –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ git push
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–π —á–∞—Å
- –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∑–∞–ø—É—Å–∫
- HTML-–æ—Ç—á—ë—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ GitHub Actions
- –í—Å–µ —à–∞–≥–∏ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
