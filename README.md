# üè† HiTE PRO Gateway ‚Äî API –¢–µ—Å—Ç—ã

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ REST API —à–ª—é–∑–∞ —É–º–Ω–æ–≥–æ –¥–æ–º–∞ **HiTE PRO Gateway**
–Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ [`api.pdf`](api.pdf).  
–¢–µ—Å—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –Ω–∞ **JavaScript** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Playwright** –≤ —Ä–µ–∂–∏–º–µ **API-only**.

---

## ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ

–°–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏, API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã:

### üîå –†–µ–ª–µ (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –°–æ—Å—Ç–æ—è–Ω–∏–µ (`status`) | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (`command`) |
|-----|--------|----------------------|------------------------|
| `switch` | Relay 1,2,4 | `boolean` (`true`/`false`) | `1` ‚Äì –í–∫–ª—é—á–∏—Ç—å<br>`2` ‚Äì –í—ã–∫–ª—é—á–∏—Ç—å<br>`3` ‚Äì –ò–º–ø—É–ª—å—Å |
| `dimmer` | Dim-1,2 / LED / 0-10V | `int` (`0‚Äì100`) | `0` ‚Äì –í—ã–∫–ª—é—á–∏—Ç—å<br>`1‚Äì100` ‚Äì –Ø—Ä–∫–æ—Å—Ç—å<br>`101` ‚Äì –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—à–ª—ã–π —É—Ä–æ–≤–µ–Ω—å |
| `drive` | Relay Drive | `int`<br>`0=–û—Ç–∫—Ä—ã—Ç`<br>`1=–ó–∞–∫—Ä—ã—Ç`<br>`2=–û—Ç–∫—Ä—ã—Ç–∏–µ`<br>`3=–ó–∞–∫—Ä—ã—Ç–∏–µ` | `2` ‚Äì –û—Ç–∫—Ä—ã—Ç—å<br>`3` ‚Äì –ó–∞–∫—Ä—ã—Ç—å<br>`4` ‚Äì –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å |

### üé® –¶–≤–µ—Ç–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
| –¢–∏–ø | –°–æ—Å—Ç–æ—è–Ω–∏–µ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
|-----|----------|-----------|
| `LED3S/M` | `status: int (0‚Äì100)`<br>`color: string (HEX)` | `PUT /devices/{id}/{level}?color=fc0841` |
| `RGBW` | `status: int (0‚Äì100)`<br>`color: HEX`<br>`colorTemperature: int (0‚Äì3600)`<br>`effect: int (0‚Äì10)` | `PUT /devices/{id}/100?color=...`<br>`colorTemperature=1500‚Äì6500`<br>`effect=0‚Äì9` |

> ‚ö†Ô∏è –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –≤ –æ—Ç–≤–µ—Ç–µ `GET /devices/{id}` –¥–ª—è RGBW **—Ü–≤–µ—Ç–æ–≤–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —É–∫–∞–∑–∞–Ω–∞ –∫–∞–∫ `0‚Äì3600`**, –Ω–æ –ø—Ä–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –¥–æ–ø—É—Å—Ç–∏–º–æ **`1500‚Äì6500`**.

### üì° –î–∞—Ç—á–∏–∫–∏ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –§–æ—Ä–º–∞—Ç `status` | –î–∏–∞–ø–∞–∑–æ–Ω |
|-----|--------|----------------|---------|
| `motion` | –î–∞—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è | `boolean` | `true`/`false` |
| `illumination` | –û—Å–≤–µ—â—ë–Ω–Ω–æ—Å—Ç—å | `int` | `0‚Äì100` |
| `temperature` | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ | `float` | `-40 ‚Ä¶ +50` |
| `humidity` | –í–ª–∞–∂–Ω–æ—Å—Ç—å | `int` | `0‚Äì100` |
| `checker` | –ö–æ–Ω—Ç–∞–∫—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è | `int` | `0=–ó–∞–∫—Ä—ã—Ç–æ`, `1=–û—Ç–∫—Ä—ã—Ç–æ` |
| `water` | –ü—Ä–æ—Ç–µ—á–∫–∞ | `int` | `0=–ù–æ—Ä–º–∞`, `1=–ó–∞–ª–∏–≤` |
| `power` | –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ | `int` | `0=–ù–µ—Ç`, `1=–ï—Å—Ç—å` |
| `transmitter` | –ü–µ—Ä–µ–¥–∞—Ç—á–∏–∫ | **–ù–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `status`** | –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ **webhook** |

---

## üß™ –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ (–æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏)

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ó–∞–ø—Ä–æ—Å | –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç |
|--------|-------|----------------|
| –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ | `GET /devices/` | `200`, –º–∞—Å—Å–∏–≤ —Å `id`, `name`, `type` (+ `status`, –µ—Å–ª–∏ –µ—Å—Ç—å –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å) |
| –ü–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ | `GET /devices/{id}` | `200`, –æ–±—ä–µ–∫—Ç —Å `id` –∏ `status` (–∏–ª–∏ `404`, –µ—Å–ª–∏ –Ω–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏) |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ switch | `PUT /devices/{id}/1` | `200`, `{ "result": "Command send" }` |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ dimmer | `PUT /devices/{id}/75` | `200`, `{ "result": "Command send" }` |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RGBW —Ü–≤–µ—Ç–æ–º | `PUT /devices/{id}/100?color=ff5733` | `200`, `{ "result": "Command send" }` |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RGBW —ç—Ñ—Ñ–µ–∫—Ç–æ–º | `PUT /devices/{id}/100?effect=2` | `200`, `{ "result": "Command send" }` |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RGBW —Ü–≤–µ—Ç–æ–≤–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π | `PUT /devices/{id}/100?colorTemperature=4000` | `200`, `{ "result": "Command send" }` |
| –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ | `GET /devices/999999` | `404`, `{ "error": ... }` |
| –ù–µ–≤–µ—Ä–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | –õ—é–±–æ–π –∑–∞–ø—Ä–æ—Å –±–µ–∑/—Å –Ω–µ–≤–µ—Ä–Ω—ã–º Auth | `401` |

---

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js 18+**
- –î–æ—Å—Ç—É–ø –∫ —à–ª—é–∑—É –ø–æ –æ–¥–Ω–æ–º—É –∏–∑ URI:
  - –õ–æ–∫–∞–ª—å–Ω—ã–π: `http://hitepro.local/rest/`
  - –ü–æ IP: `http://<IP>/rest/`
  - –í–Ω–µ—à–Ω–∏–π: `https://<–≤–Ω–µ—à–Ω–∏–π_–∫–ª—é—á>.connect-profi.ru/rest/`
- –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ Basic Auth

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
git clone https://github.com/cheryst24-code-qa/hitepro-api-tests.git
cd hitepro-api-tests
npm install
cp .env.example .env  # ‚Üê —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–∏ HITEPRO_BASE_URL, USER, PASS
npm test
npx playwright show-report

```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

git clone https://github.com/cheryst24-code-qa/hitepro-api-tests.git
cd hitepro-api-tests

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
npm install

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
### –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
cp .env.example .env

### –û—Ç–∫—Ä–æ–π—Ç–µ .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:
HITEPRO_BASE_URL=https://–≤–∞—à_–∫–ª—é—á.connect-profi.ru/rest/
HITEPRO_USER=admin
HITEPRO_PASS=–≤–∞—à_–ø–∞—Ä–æ–ª—å

üîí –í–∞–∂–Ω–æ: —Ñ–∞–π–ª .env –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ Git!

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:
### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
npm test

### –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
npx playwright test

### 5. –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á—ë—Ç–∞:
npx playwright show-report

## ü§ñ CI/CD: GitHub Actions + Telegram
–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

‚úÖ –ü—Ä–∏ –∫–∞–∂–¥–æ–º git push –≤ main
‚úÖ –ö–∞–∂–¥—ã–π —á–∞—Å (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É–º–Ω–æ–≥–æ –¥–æ–º–∞)
‚úÖ –° –æ—Ç–ø—Ä–∞–≤–∫–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram

### –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
2. –ü–æ–ª—É—á–∏—Ç–µ TELEGRAM_BOT_TOKEN –∏ TELEGRAM_CHAT_ID
3. –î–æ–±–∞–≤—å—Ç–µ –∏—Ö –∫–∞–∫ Secrets –≤ GitHub:
- Settings ‚Üí Secrets and variables ‚Üí Actions
4. Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Ö

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: CI_CD_CHECKLIST.md

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
hitepro-api-tests/
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ devices.spec.js         # –û—Å–Ω–æ–≤–Ω—ã–µ Playwright-—Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ .env.example                # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ playwright.config.js         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Playwright
‚îú‚îÄ‚îÄ ci-cd-audit.js              # –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ CI_CD_CHECKLIST.md          # –ß–µ–∫-–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CI/CD
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md                   # –≠—Ç–æ—Ç —Ñ–∞–π–ª

## üìã –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–µ–∫-–ª–∏—Å—Ç:

- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: 401 –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- GET /devices/ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- GET /devices/{id} ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π status –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
- PUT /devices/{id}/1 ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- GET /devices/999999 ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404
- –õ–æ–≥–∏: GET /logs/device/?id=... ‚Äî —Ä–∞–±–æ—Ç–∞—é—Ç

–ü–æ–ª–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç: CI_CD_CHECKLIST.md

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ .env –∏ –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ Git.
- –í CI/CD –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è GitHub Secrets.
- –ù–∏–∫–∞–∫–∏–µ –ø–∞—Ä–æ–ª–∏ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ª–æ–≥–∏ –∏–ª–∏ –æ—Ç—á—ë—Ç—ã.

